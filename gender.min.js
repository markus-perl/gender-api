/*!
 * gender.js v0.3
 * Copyright 2014 gender-api.com
 * http://www.apache.org/licenses/LICENSE-2.0
 */
(function(a){a.fn.genderApi=function(d){var i=a(this);var f=false;var j=500;var c=null;var k=null;var h=function(){if(c){clearTimeout(c)}c=setTimeout(e,j)};var g={ip:"auto"};if(d.key){g.key=d.key}if(d.country){g.country=d.country}if(d.language){g.language=d.language}var l="https:"==document.location.protocol?"https://":"http://";var b=d.url?d.url:l+"gender-api.com/get";var e=function(){var o=a.trim(i.val());if(o.length>1){g.name=o;if(f==true){return}if(o==k){return}f=true;k=o;if(!a.support.cors&&a.ajaxTransport&&window.XDomainRequest){var m=new XDomainRequest();if(m){if(window.location&&window.location.href){g.ref=window.location.href}m.onload=function(){var p=a.parseJSON(m.responseText);if(p&&p.gender){i.trigger("gender-found",p)}f=false};var n="";a.each(g,function(p,q){n+="&"+p+"="+encodeURIComponent(q)});m.open("get",b+"?"+n.substr(1));m.send()}}else{a.ajax({url:b,data:g,dataType:"json"}).done(function(p){if(p.gender){i.trigger("gender-found",p)}f=false})}}};i.on({change:e,focusout:e,keyup:h,paste:function(){setTimeout(e,100)}});return this}})(jQuery);