/*!
 * gender.js v0.5
 * Copyright 2014 gender-api.com
 * https://github.com/markus-perl/gender-api/blob/master/LICENSE
 *
 *
 */
(function(b){var a=function(k,f){var l=b(k);var h=false;var m=500;var e=null;var n=null;var c=true;l.detachApi=function(){c=false};l.attachApi=function(){c=true};var j={ip:"auto"};if(f.key){j.key=f.key}if(f.country){j.country=f.country}if(f.language){j.language=f.language}var o="https:"==document.location.protocol?"https://":"http://";var d=f.url?f.url:o+"gender-api.com/get";l.query=function(r,s){r=b.trim(r);if(r.length>1){j.name=r;if(h==true){return}if(r==n){return}h=true;n=r;if(!b.support.cors&&b.ajaxTransport&&window.XDomainRequest){var p=new XDomainRequest();if(p){if(window.location&&window.location.href){j.ref=window.location.href}p.onload=function(){var t=b.parseJSON(p.responseText);s(t);h=false};var q="";b.each(j,function(t,u){q+="&"+t+"="+encodeURIComponent(u)});p.open("get",d+"?"+q.substr(1));p.send()}}else{b.ajax({url:d,data:j,dataType:"json"}).done(function(t){s(t);h=false})}}else{s({name:r,gender:null})}};if(f.hasOwnProperty("name")&&f.callback){l.query(f.name,f.callback);return}var i=function(){if(e){clearTimeout(e)}e=setTimeout(g,m)};var g=function(){if(c){var p=l.val();l.query(p,function(q){if(q.gender){l.trigger("gender-found",q)}h=false})}};l.on({change:g,focusout:g,keyup:i,paste:function(){setTimeout(g,100)}});l.data("genderapi",l)};b.fn.genderApi=function(c){return this.each(function(){var d=b(this).data("genderapi");switch(c){case"detach":if(d){d.detachApi();return d}return null;case"attach":if(d){d.attachApi();return d}return null}return new a(this,c)})}})(jQuery);